<script>
  function openMenu() {
    $('.menu_toggle').toggleClass('active');
    $('header nav').toggleClass('active');
    $('.menu_toggle i').toggleClass('fa-bars');
    $('.menu_toggle i').toggleClass('fa-times');
  }

  $(document).ready(function(){
    if ($(window).width() <= 720) {
      openMenu();
    }
    
    $('.menu_toggle').click(function(){
      openMenu();
    })

    $('.submenu > a').click(function(){
      $(this).parent().toggleClass('active');
      $(this).find('i').toggleClass('fa-folder');
      $(this).find('i').toggleClass('fa-folder-open');
    })
  })
</script>

  <a class="menu_toggle active"><i class="fas fa-times"></i></a>
  <a href="/index.html"><i class="fa fa-home"></i></a>
  <a href="https://github.com/AvaN0x"><img src="https://avatars3.githubusercontent.com/u/27494805?s=460&v=4" title="github.com/AvaN0x"/></a>
  <a id="menuHolidayTimer" href="/index.html#holidayTimer">
    <span>00</span>j <span>00</span>h<span>00</span>m
  </a>


  <nav class="active">
    <ul>
      <h1>A propos</h1>
      <li><a href="https://github.com/AvaN0x"><i class="fab fa-github"></i>GitHub</a></li>
      <li><a href="/page/infos.html"><i class="far fa-list-alt"></i>Infos</a></li>
      <li><a href="https://discord.gg/uDPqGyQ" target="blank"><i class="fab fa-discord"></i>Discord</a></li>
    </ul>  
    <ul>
      <h1>Etudes</h1>
      <li class="submenu"><a><i class="fas fa-folder"></i>IUT - Metz</a>
        <ul> 
          <li><a href="/etudes/iut/projetS1.html"><i class="fas fa-chalkboard"></i>Projet Tutoré S1 - Web</a></li>
          <li><a href="/etudes/iut/projetNim.html"><i class="fas fa-chalkboard"></i>Projet Nim</a></li>
          <li><a href="/etudes/iut/edt21.html"><i class="far fa-calendar-alt"></i>Emploi du temps - Grp 2.1</a></li>
        </ul>
      </li>
      <li class="submenu"><a><i class="fas fa-folder"></i>Lycée</a>
        <ul>
          <li><a href="/etudes/lycee/TPE.html"><i class="fas fa-chalkboard"></i>TPE : La Lune</a></li>
        </ul>
      </li>
    </ul>
    <ul>
      <h1>Fiches</h1>
      <li class="submenu"><a><i class="fas fa-folder"></i>Fiches</a>
        <ul>
          <li class="submenu"><a><i class="fas fa-folder"></i>Programmation</a>
            <ul>
              <li><a href="/fiche/prog/algo.html"><i class="fas fa-book"></i>Algorithmique</a></li>
              <li><a href="/fiche/prog/c.html"><i class="fas fa-book"></i>C / MinGW / SDL</a></li>
              <li><a href="/fiche/prog/sql.html"><i class="fas fa-spinner fa-spin"></i>SQL</a></li>
            </ul>
          </li>
          <li><a href="/fiche/excel.html"><i class="fas fa-spinner fa-spin"></i>Excel</a></li>
        </ul>
      </li>
    </ul>
    <ul>
      <h1>Historique</h1>
      <li><a href="/page/historique/v1/index.html"><i class="fas fa-save"></i>Première version</a></li>
    </ul>
  </nav>

  
  <script>
    var goalDate;

    function getGoalDate() {
      var holidayDate = {
          "date":[
            {"type": 1, "date": new Date(2019, 12-1, 20, 17, 30).getTime() },
            {"type": 0, "date": new Date(2020, 1-1, 6, 8, 0).getTime() },
            {"type": 1, "date": new Date(2020, 2-1, 14, 17, 30).getTime() },
            {"type": 0, "date": new Date(2020, 2-1, 24, 8, 0).getTime() },
            {"type": 1, "date": new Date(2020, 4-1, 11, 17, 30).getTime() },
            {"type": 0, "date": new Date(2020, 4-1, 27, 8, 0).getTime() },
            {"type": 1, "date": new Date(2020, 6-1, 26, 17, 30).getTime() }
          ]
        }

        for (var i = 0; i < Object.keys(holidayDate.date).length; i++)
          if (new Date().getTime() < holidayDate.date[i].date) {
            goalDate = holidayDate.date[i].date;
            console.log("Date countdown " + (holidayDate.date[i].date - new Date().getTime()) + ", type : " + holidayDate.date[i].type);
            console.log(Object.keys(holidayDate.date).length + " dates disponibles.");
            console.log(new Date(holidayDate.date[Object.keys(holidayDate.date).length - 1].date).getDate() + "/" + (new Date(holidayDate.date[Object.keys(holidayDate.date).length - 1].date).getMonth() + 1) + "/" + new Date(holidayDate.date[Object.keys(holidayDate.date).length - 1].date).getFullYear());              
            break;
          }

        if (holidayDate.date[i].type) {
          // page d'accueil
          $("#holidayTimer > p").text("Avant les prochaines vacances :D");

          // menu
          $("#menuHolidayTimer").prop("title","Avant les prochaines vacances :D - Clique pour voir");
        }
        else {
          // page d'accueil
          $("#holidayTimer > p").text("Avant la fin des vacances :(");

          // menu
          $("#menuHolidayTimer").prop("title","Avant la fin des vacances :( - Clique pour voir");

        }
    }

    function holidayTimer() {
      var time = Math.floor((goalDate - new Date().getTime())/1000);
      var d = Math.floor(time / 86400);
      var h = Math.floor((time % 86400) / 3600);
      var m = Math.floor(( (time % 86400) % 3600) / 60);
      var s = Math.floor(( (time % 86400) % 3600) % 60);
      
      if (time >= 0) {
        // page accueil
        $('#holidayTimer .days span:eq(0)').html((d < 10) ? "0" + d : d);
        $('#holidayTimer .hours span:eq(0)').html((h < 10) ? "0" + h : h);
        $('#holidayTimer .minutes span:eq(0)').html((m < 10) ? "0" + m : m);
        $('#holidayTimer .seconds span:eq(0)').html((s < 10) ? "0" + s : s);


        // menu
        $('#menuHolidayTimer span:eq(0)').html((d < 10) ? "0" + d : d);
        $('#menuHolidayTimer span:eq(1)').html((h < 10) ? "0" + h : h);
        $('#menuHolidayTimer span:eq(2)').html((m < 10) ? "0" + m : m);

      }
      if (time == -1)
        getGoalDate()

    }

    $(document).ready(function(){
        getGoalDate();
        holidayTimer();
        setInterval(holidayTimer, 1000);
    })
  </script>
